<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ‘¤ Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ - OraaSlayer</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --primary-color: #8B7BFF;
  --secondary-color: #FF7BA9;
  --accent-color: #5FD8FF;
  --bg-dark: #0F0F25;
  --bg-card: rgba(26, 26, 60, 0.9);
  --text-light: #FFFFFF;
  --glass-bg: rgba(255, 255, 255, 0.15);
  --glass-border: rgba(255, 255, 255, 0.25);
  --success-color: #3DD8A9;
  --warning-color: #FFC14D;
  --error-color: #FF6B82;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  background: var(--bg-dark);
  color: var(--text-light);
  font-family: 'Cairo', sans-serif;
  min-height: 100vh;
  background-image: 
    radial-gradient(circle at 20% 80%, rgba(139, 123, 255, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255, 123, 169, 0.15) 0%, transparent 50%);
  padding: 0;
  overflow-x: hidden;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--bg-dark);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 3px solid var(--glass-bg);
  border-top: 3px solid var(--primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-screen p {
  color: var(--text-light);
  font-size: 1.1rem;
}

/* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
.login-required {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--bg-dark);
  z-index: 9998;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 20px;
}

.login-required.show {
  display: flex;
}

.login-required .icon {
  font-size: 4rem;
  color: var(--primary-color);
  margin-bottom: 20px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.login-required h2 {
  font-size: 1.8rem;
  margin-bottom: 15px;
  color: var(--text-light);
  font-weight: 700;
}

.login-required p {
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 30px;
  font-size: 1.1rem;
  max-width: 400px;
  line-height: 1.6;
}

.login-required .btn {
  background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
  border: none;
  color: white;
  padding: 15px 30px;
  border-radius: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: 'Cairo', sans-serif;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
}

.login-required .btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(139, 123, 255, 0.4);
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.main-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(30, 30, 60, 0.95);
  backdrop-filter: blur(20px);
  padding: 15px 20px;
  border-bottom: 1px solid var(--glass-border);
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.logo {
  font-size: 1.4rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-actions {
  display: flex;
  gap: 12px;
}

.header-btn {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  color: var(--text-light);
  padding: 10px 15px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: 'Cairo', sans-serif;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap;
}

.header-btn:hover {
  background: rgba(139, 123, 255, 0.2);
  transform: translateY(-2px);
}

/* ØºÙ„Ø§Ù Ø§Ù„ØµÙØ­Ø© */
.cover {
  height: 180px;
  background: linear-gradient(135deg, rgba(139, 123, 255, 0.3), rgba(255, 123, 169, 0.3)), 
              url('https://i.ibb.co/JrFz4b2/anime-banner.jpg') center/cover;
  position: relative;
  border-bottom: 1px solid var(--glass-border);
}

.cover::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 50%, var(--bg-dark) 100%);
}

/* Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.profile-box {
  background: var(--bg-card);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  margin: -70px 15px 25px;
  padding: 25px 20px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
  border: 1px solid var(--glass-border);
  position: relative;
  z-index: 10;
}

/* Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© */
.profile-img {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  border: 4px solid var(--primary-color);
  object-fit: cover;
  margin-top: -70px;
  background: var(--bg-card);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  position: relative;
  z-index: 20;
  transition: all 0.3s ease;
}

.profile-img:hover {
  transform: scale(1.05);
  border-color: var(--secondary-color);
}

/* Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØªÙˆØ«ÙŠÙ‚ */
.username {
  margin-top: 20px;
  font-size: 1.5rem;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  flex-wrap: wrap;
}

.verified {
  color: var(--secondary-color);
  animation: pulse 2s infinite alternate;
  font-size: 1.1rem;
  filter: drop-shadow(0 0 8px var(--secondary-color));
  display: none;
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(1.2); opacity: 1; }
}

.about {
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.95rem;
  margin-top: 10px;
  padding: 0 10px;
  line-height: 1.5;
  max-height: 3em;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

/* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
.stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-top: 25px;
}

.stat {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  padding: 18px 12px;
  border-radius: 16px;
  border: 1px solid var(--glass-border);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.stat::before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
}

.stat:hover {
  transform: translateY(-3px);
  background: rgba(139, 123, 255, 0.2);
}

.stat strong {
  display: block;
  font-size: 1.4rem;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 800;
}

.stat span {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.7);
  margin-top: 5px;
  display: block;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.btns {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-top: 25px;
}

.btn {
  background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
  border: none;
  color: white;
  padding: 14px 12px;
  border-radius: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-family: 'Cairo', sans-serif;
  font-size: 0.85rem;
  position: relative;
  overflow: hidden;
  min-height: 50px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(139, 123, 255, 0.4);
}

.btn:active {
  transform: translateY(0);
}

.btn i {
  font-size: 0.9rem;
  flex-shrink: 0;
}

.btn span {
  font-size: 0.8rem;
  line-height: 1.2;
}

/* Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
.section {
  margin: 30px 15px;
}

.section-title {
  font-size: 1.3rem;
  margin-bottom: 20px;
  color: var(--primary-color);
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
}

.section-title i {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù†Ù…ÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø© */
.anime-list {
  display: flex;
  overflow-x: auto;
  gap: 12px;
  padding: 10px 5px;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
}

.anime-list::-webkit-scrollbar {
  display: none;
}

.anime-card {
  min-width: 110px;
  text-align: center;
  transition: all 0.4s ease;
  background: var(--bg-card);
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid var(--glass-border);
  position: relative;
  flex-shrink: 0;
  cursor: pointer;
}

.anime-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.anime-card:hover::before {
  transform: scaleX(1);
}

.anime-card img {
  width: 110px;
  height: 150px;
  object-fit: cover;
  background: var(--bg-dark);
  transition: transform 0.4s ease;
  display: block;
}

.anime-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(139, 123, 255, 0.3);
}

.anime-card:hover img {
  transform: scale(1.05);
}

.anime-card p {
  padding: 10px 5px;
  font-size: 0.8rem;
  font-weight: 600;
  background: rgba(0, 0, 0, 0.6);
  margin: 0;
  line-height: 1.2;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Ø§Ù„Ø£ÙˆØ³Ù…Ø© */
.badges {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.badge {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  border-radius: 14px;
  text-align: center;
  padding: 18px 10px;
  transition: all 0.4s ease;
  border: 1px solid var(--glass-border);
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

.badge:hover {
  background: rgba(139, 123, 255, 0.15);
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

.badge i {
  font-size: 1.6rem;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 8px;
  display: block;
}

.badge p {
  font-weight: 600;
  color: var(--text-light);
  font-size: 0.85rem;
  line-height: 1.2;
}

/* Ø§Ù„ÙÙˆØªØ± */
footer {
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  margin: 40px 15px 80px;
  font-size: 0.85rem;
  padding: 20px 0;
  border-top: 1px solid var(--glass-border);
}

/* Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.btn-home {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  border: none;
  border-radius: 50px;
  padding: 14px 20px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 25px rgba(139, 123, 255, 0.5);
  transition: all 0.3s ease;
  z-index: 100;
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: 'Cairo', sans-serif;
  font-size: 0.9rem;
  text-decoration: none;
}

.btn-home:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 12px 30px rgba(139, 123, 255, 0.6);
}

/* Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.notification {
  position: fixed;
  top: 80px;
  right: 15px;
  left: 15px;
  background: var(--bg-card);
  backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  color: white;
  padding: 15px 18px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
  z-index: 1000;
  transform: translateY(-100px);
  opacity: 0;
  transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  display: flex;
  align-items: center;
  gap: 12px;
}

.notification.show {
  transform: translateY(0);
  opacity: 1;
}

.notification i {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.notification.success i {
  color: var(--success-color);
}

.notification.error i {
  color: var(--error-color);
}

.notification.warning i {
  color: var(--warning-color);
}

.notification.info i {
  color: var(--accent-color);
}

.notification span {
  font-size: 0.9rem;
  line-height: 1.3;
}

/* Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  z-index: 2000;
  display: none;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
  padding: 15px;
}

.modal-overlay.show {
  display: flex;
  opacity: 1;
}

.modal-box {
  background: var(--bg-card);
  backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  padding: 25px 20px;
  border-radius: 18px;
  width: 100%;
  max-width: 380px;
  text-align: right;
  box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
  transform: scale(0.9);
  transition: transform 0.3s ease;
}

.modal-overlay.show .modal-box {
  transform: scale(1);
}

.modal-title {
  font-size: 1.3rem;
  color: var(--primary-color);
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
}

.modal-input {
  width: 100%;
  padding: 14px 16px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  color: var(--text-light);
  font-family: 'Cairo', sans-serif;
  font-size: 1rem;
  margin-bottom: 20px;
  transition: all 0.3s ease;
  border: none;
  outline: none;
}

.modal-input:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(139, 123, 255, 0.2);
}

.modal-btns {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.modal-btn {
  border: none;
  padding: 12px 20px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  font-family: 'Cairo', sans-serif;
  font-size: 0.9rem;
  min-width: 80px;
}

.modal-btn.confirm {
  background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
  color: white;
}

.modal-btn.confirm:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(139, 123, 255, 0.4);
}

.modal-btn.cancel {
  background: var(--glass-bg);
  color: rgba(255, 255, 255, 0.8);
  border: 1px solid var(--glass-border);
}

.modal-btn.cancel:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© */
@media (min-width: 400px) {
  .profile-box {
    margin: -70px 20px 25px;
    padding: 25px;
  }
  
  .profile-img {
    width: 120px;
    height: 120px;
  }
  
  .username {
    font-size: 1.6rem;
  }
  
  .about {
    font-size: 1rem;
  }
  
  .stats {
    gap: 15px;
  }
  
  .stat {
    padding: 20px 15px;
  }
  
  .stat strong {
    font-size: 1.5rem;
  }
  
  .btns {
    gap: 12px;
  }
  
  .btn {
    padding: 14px 15px;
    font-size: 0.9rem;
  }
  
  .anime-card {
    min-width: 120px;
  }
  
  .anime-card img {
    width: 120px;
    height: 160px;
  }
  
  .badges {
    gap: 15px;
  }
  
  .badge {
    padding: 20px 12px;
  }
}

@media (min-width: 768px) {
  .profile-box {
    margin: -80px auto 30px;
    max-width: 600px;
    padding: 30px;
  }
  
  .profile-img {
    width: 140px;
    height: 140px;
    margin-top: -80px;
  }
  
  .username {
    font-size: 1.8rem;
  }
  
  .stats {
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
  }
  
  .btns {
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
  }
  
  .section {
    margin: 40px auto;
    max-width: 600px;
  }
  
  .badges {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .notification {
    right: 30px;
    left: auto;
    max-width: 350px;
  }
}

@media (min-width: 1024px) {
  .profile-box {
    max-width: 700px;
  }
  
  .section {
    max-width: 700px;
  }
  
  .btns {
    grid-template-columns: repeat(5, 1fr);
  }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ù„Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø£ÙÙ‚ÙŠØ© */
@media (max-height: 600px) and (orientation: landscape) {
  .cover {
    height: 140px;
  }
  
  .profile-box {
    margin: -60px 15px 20px;
    padding: 20px 15px;
  }
  
  .profile-img {
    width: 90px;
    height: 90px;
    margin-top: -60px;
  }
  
  .username {
    font-size: 1.3rem;
    margin-top: 15px;
  }
  
  .stats {
    margin-top: 15px;
    gap: 10px;
  }
  
  .stat {
    padding: 15px 10px;
  }
  
  .btns {
    margin-top: 20px;
    gap: 8px;
  }
  
  .btn {
    padding: 12px 8px;
    font-size: 0.8rem;
    min-height: 45px;
  }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
@media (min-width: 1400px) {
  .profile-box {
    max-width: 800px;
  }
  
  .section {
    max-width: 800px;
  }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ù„Ù€ iOS */
@supports (-webkit-touch-callout: none) {
  .btn, .header-btn, .modal-btn {
    cursor: default;
  }
  
  input, textarea {
    font-size: 16px; /* Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙÙŠ iOS */
  }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ¯Ø¹Ù… hover */
@media (hover: none) {
  .btn:hover, .stat:hover, .badge:hover, .anime-card:hover {
    transform: none;
  }
  
  .btn:active, .stat:active, .badge:active, .anime-card:active {
    transform: scale(0.95);
  }
}
</style>
</head>

<body>
<!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
<div class="loading-screen" id="loadingScreen">
  <div class="loading-spinner"></div>
  <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
</div>

<!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div class="login-required" id="loginRequired">
  <div class="icon">ğŸ”’</div>
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨</h2>
  <p>ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</p>
  <a href="login.html" class="btn">
    <i class="fa-solid fa-right-to-bracket"></i>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  </a>
</div>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
<div id="mainContent" style="display: none;">
  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header class="main-header">
    <div class="logo">ğŸŒ€ OraaSlayer</div>
    <div class="header-actions">
      <button class="header-btn" onclick="location.href='index.html'">
        <i class="fa-solid fa-house"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      </button>
      <button class="header-btn" id="logoutBtn">
        <i class="fa-solid fa-right-from-bracket"></i>Ø®Ø±ÙˆØ¬
      </button>
    </div>
  </header>

  <!-- Ø§Ù„ØºÙ„Ø§Ù -->
  <div class="cover" id="cover"></div>

  <!-- Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
  <div class="profile-box">
    <img src="https://i.ibb.co/YRShYmn/avatar.png" alt="avatar" class="profile-img" id="profileImg">
    <h2 class="username" id="username">
      <span class="name-text" id="nameText">Oraa</span>
      <i class="fa-solid fa-crown verified" id="verifyIcon" title="Ø­Ø³Ø§Ø¨ Ù…Ù…ÙŠØ²"></i>
    </h2>
    <p class="about" id="about">Ø¹Ø§Ø´Ù‚ Ø§Ù„Ø£Ù†Ù…ÙŠ âœ¨ | Ù…Ø³ØªÙƒØ´Ù Ø§Ù„Ø¹ÙˆØ§Ù„Ù… Ø§Ù„Ø®ÙŠØ§Ù„ÙŠØ© ğŸš€ | Ù…Ø­Ø¨ Ù„Ù„ØªØ­Ø¯ÙŠØ§Øª ğŸ¯</p>

    <div class="stats">
      <div class="stat"><strong id="animeCount">0</strong><span>Ø£Ù†Ù…ÙŠ</span></div>
      <div class="stat"><strong id="watchTime">0</strong><span>Ø³Ø§Ø¹Ø© Ù…Ø´Ø§Ù‡Ø¯Ø©</span></div>
      <div class="stat"><strong id="followers">0</strong><span>Ù…ØªØ§Ø¨Ø¹</span></div>
      <div class="stat"><strong id="achievements">0</strong><span>Ø¥Ù†Ø¬Ø§Ø²</span></div>
    </div>

    <div class="btns">
      <button class="btn" id="editName">
        <i class="fa-solid fa-user-pen"></i>
        <span>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø³Ù…</span>
      </button>
      <button class="btn" id="editAbout">
        <i class="fa-solid fa-comment-dots"></i>
        <span>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø¨Ø°Ø©</span>
      </button>
      <button class="btn" id="changeImg">
        <i class="fa-solid fa-image"></i>
        <span>ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©</span>
      </button>
      <button class="btn" id="changeCover">
        <i class="fa-solid fa-panorama"></i>
        <span>ØªØºÙŠÙŠØ± Ø§Ù„ØºÙ„Ø§Ù</span>
      </button>
      <button class="btn" id="verifyBtn">
        <i class="fa-solid fa-shield-halved"></i>
        <span>Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ù…ÙŠØ²</span>
      </button>
    </div>
  </div>

  <!-- Ø§Ù„Ø£Ù†Ù…ÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø© -->
  <section class="section">
    <h3 class="section-title"><i class="fa-solid fa-heart"></i>Ø£Ù†Ù…ÙŠØ§ØªÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h3>
    <div class="anime-list" id="favoriteAnimeList">
      <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
    </div>
  </section>

  <!-- Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª -->
  <section class="section">
    <h3 class="section-title"><i class="fa-solid fa-trophy"></i>Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙŠ</h3>
    <div class="badges">
      <div class="badge"><i class="fa-solid fa-fire-flame-curved"></i><p>Ù…Ø­ØªØ±Ù Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</p></div>
      <div class="badge"><i class="fa-solid fa-star-sharp"></i><p>Ø§Ù„Ù†Ø§Ù‚Ø¯ Ø§Ù„Ù…Ù…ÙŠØ²</p></div>
      <div class="badge"><i class="fa-solid fa-gem"></i><p>Ø¬Ø§Ù…Ø¹ Ø§Ù„Ù…ÙØ¶Ù„Ø©</p></div>
      <div class="badge"><i class="fa-solid fa-wand-magic-sparkles"></i><p>Ø³Ø§Ø­Ø± Ø§Ù„ØªØµÙ…ÙŠÙ…</p></div>
      <div class="badge"><i class="fa-solid fa-clock"></i><p>Ø¨Ø·Ù„ Ø§Ù„Ø³Ø§Ø¹Ø§Øª</p></div>
      <div class="badge"><i class="fa-solid fa-users"></i><p>Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</p></div>
    </div>
  </section>

  <footer>Â© 2025 OraaSlayer â€¢ ØµÙ†Ø¹ Ø¨ÙƒÙ„ Ø­Ø¨ ğŸ’œ</footer>

  <a href="index.html" class="btn-home">
    <i class="fa-solid fa-house"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  </a>
</div>

<!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± -->
<div class="notification" id="notification">
  <i class="fa-solid fa-circle-check"></i>
  <span id="notificationText">ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!</span>
</div>

<!-- Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal-box">
    <h3 class="modal-title" id="modalTitle"><i class="fa-solid fa-pen"></i>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
    <input type="text" class="modal-input" id="modalInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...">
    <div class="modal-btns">
      <button class="modal-btn cancel" id="modalCancel">Ø¥Ù„ØºØ§Ø¡</button>
      <button class="modal-btn confirm" id="modalConfirm">ØªØ£ÙƒÙŠØ¯</button>
    </div>
  </div>
</div>

<!-- Firebase SDK -->
<script type="module">
  // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø§Øª Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { 
    getAuth, 
    onAuthStateChanged, 
    signOut,
    updateProfile
  } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
  import { 
    getFirestore, 
    doc, 
    getDoc, 
    setDoc,
    updateDoc,
    serverTimestamp 
  } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
  import { 
    getStorage, 
    ref, 
    uploadBytes, 
    getDownloadURL 
  } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js";

  // ØªÙƒÙˆÙŠÙ† Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBDMFcCvthKNkHUrEbgYY1Uc80KTPpS01M",
    authDomain: "oraa-slayer-anime.firebaseapp.com",
    projectId: "oraa-slayer-anime",
    storageBucket: "oraa-slayer-anime.firebasestorage.app",
    messagingSenderId: "426607460785",
    appId: "1:426607460785:web:c8d9844253c9111ad3bd90",
    measurementId: "G-VNHP64HXD5"
  };

  // ØªÙ‡ÙŠØ¦Ø© Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // Ø¹Ù†Ø§ØµØ± DOM
  const loadingScreen = document.getElementById('loadingScreen');
  const loginRequired = document.getElementById('loginRequired');
  const mainContent = document.getElementById('mainContent');
  const nameText = document.getElementById('nameText');
  const about = document.getElementById('about');
  const profileImg = document.getElementById('profileImg');
  const coverImg = document.getElementById('cover');
  const verifyIcon = document.getElementById('verifyIcon');
  const favoriteAnimeList = document.getElementById('favoriteAnimeList');
  const notification = document.getElementById('notification');
  const notificationText = document.getElementById('notificationText');
  const logoutBtn = document.getElementById('logoutBtn');

  // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  const modalOverlay = document.getElementById('modalOverlay');
  const modalTitle = document.getElementById('modalTitle');
  const modalInput = document.getElementById('modalInput');
  const modalConfirm = document.getElementById('modalConfirm');
  const modalCancel = document.getElementById('modalCancel');

  let modalCallback = null;
  let currentUser = null;

  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ù†Ù…ÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©
  const favoriteAnimeData = [
    { 
      title: "Ù‡Ø¬ÙˆÙ… Ø§Ù„Ø¹Ù…Ø§Ù„Ù‚Ø©", 
      img: "https://cdn.myanimelist.net/images/anime/10/47347.jpg",
      backupImg: "https://placehold.co/120x160/1a1a3a/8B7BFF?text=AOT"
    },
    { 
      title: "Ù‚Ø§ØªÙ„ Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†", 
      img: "https://cdn.myanimelist.net/images/anime/1286/99889.jpg",
      backupImg: "https://placehold.co/120x160/1a1a3a/FF7BA9?text=KNY"
    },
    { 
      title: "ÙˆÙ† Ø¨ÙŠØ³", 
      img: "https://cdn.myanimelist.net/images/anime/6/73245.jpg",
      backupImg: "https://placehold.co/120x160/1a1a3a/5FD8FF?text=OP"
    },
    { 
      title: "Ù…Ø°ÙƒØ±Ø© Ø§Ù„Ù…ÙˆØª", 
      img: "https://cdn.myanimelist.net/images/anime/9/9453.jpg",
      backupImg: "https://placehold.co/120x160/1a1a3a/8B7BFF?text=DN"
    }
  ];

  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
  function showNotification(message, type = 'success') {
    notificationText.textContent = message;
    notification.className = 'notification';
    notification.classList.add(type, 'show');
    
    setTimeout(() => {
      notification.classList.remove('show');
    }, 4000);
  }

  // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  function showModal(title, defaultValue, callback, inputType = 'text') {
    modalTitle.innerHTML = `<i class="fa-solid fa-pen"></i>${title}`;
    modalInput.value = defaultValue || '';
    modalInput.type = inputType;
    modalCallback = callback;
    modalOverlay.classList.add('show');
    
    // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
    setTimeout(() => {
      modalInput.focus();
    }, 300);
  }

  function hideModal() {
    modalOverlay.classList.remove('show');
    modalCallback = null;
    modalInput.type = 'text';
  }

  // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  modalConfirm.addEventListener('click', () => {
    if (modalCallback && modalInput.value.trim() !== '') {
      modalCallback(modalInput.value.trim());
    } else if (modalInput.value.trim() === '') {
      showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø©', 'warning');
      return;
    }
    hideModal();
  });

  modalCancel.addEventListener('click', hideModal);

  modalOverlay.addEventListener('click', (e) => {
    if (e.target === modalOverlay) {
      hideModal();
    }
  });

  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Esc
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modalOverlay.classList.contains('show')) {
      hideModal();
    }
  });

  // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Firebase
  async function loadUserData(user) {
    try {
      console.log('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', user.uid);
      
      const userDoc = await getDoc(doc(db, "users", user.uid));
      
      if (userDoc.exists()) {
        const userData = userDoc.data();
        console.log('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', userData);
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        nameText.textContent = user.displayName || userData.username || 'Ù…Ø³ØªØ®Ø¯Ù…';
        about.textContent = userData.about || 'Ø¹Ø§Ø´Ù‚ Ø§Ù„Ø£Ù†Ù…ÙŠ âœ¨ | Ù…Ø³ØªÙƒØ´Ù Ø§Ù„Ø¹ÙˆØ§Ù„Ù… Ø§Ù„Ø®ÙŠØ§Ù„ÙŠØ© ğŸš€ | Ù…Ø­Ø¨ Ù„Ù„ØªØ­Ø¯ÙŠØ§Øª ğŸ¯';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±
        if (userData.profileImage && userData.profileImage !== '') {
          profileImg.src = userData.profileImage;
        }
        if (userData.coverImage && userData.coverImage !== '') {
          coverImg.style.backgroundImage = `url(${userData.coverImage})`;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        document.getElementById('animeCount').textContent = userData.animeCount || '0';
        document.getElementById('watchTime').textContent = userData.watchTime || '0';
        document.getElementById('followers').textContent = userData.followers || '0';
        document.getElementById('achievements').textContent = userData.achievements || '0';
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù…ÙŠØ²
        if (userData.verified === true) {
          verifyIcon.style.display = "inline";
        } else {
          verifyIcon.style.display = "none";
        }
      } else {
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªÙ†Ø¯ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        console.log('Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªÙ†Ø¯ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…');
        const userData = {
          username: user.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
          email: user.email,
          about: 'Ø¹Ø§Ø´Ù‚ Ø§Ù„Ø£Ù†Ù…ÙŠ âœ¨ | Ù…Ø³ØªÙƒØ´Ù Ø§Ù„Ø¹ÙˆØ§Ù„Ù… Ø§Ù„Ø®ÙŠØ§Ù„ÙŠØ© ğŸš€ | Ù…Ø­Ø¨ Ù„Ù„ØªØ­Ø¯ÙŠØ§Øª ğŸ¯',
          profileImage: 'https://i.ibb.co/YRShYmn/avatar.png',
          coverImage: 'https://i.ibb.co/JrFz4b2/anime-banner.jpg',
          animeCount: 0,
          watchTime: 0,
          followers: 0,
          achievements: 0,
          verified: false,
          createdAt: serverTimestamp(),
          lastLogin: serverTimestamp()
        };
        
        await setDoc(doc(db, "users", user.uid), userData);
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        nameText.textContent = userData.username;
        about.textContent = userData.about;
      }
      
      loadFavoriteAnime();
      
    } catch (error) {
      console.error("Error loading user data:", error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ' + error.message, 'error');
    }
  }

  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù†Ù…ÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©
  function loadFavoriteAnime() {
    try {
      favoriteAnimeList.innerHTML = '';
      
      favoriteAnimeData.forEach(anime => {
        const animeCard = document.createElement('div');
        animeCard.className = 'anime-card';
        
        animeCard.innerHTML = `
          <img src="${anime.img}" alt="${anime.title}" 
               onerror="this.src='${anime.backupImg}'">
          <p>${anime.title}</p>
        `;
        
        animeCard.addEventListener('click', () => {
          localStorage.setItem('selectedAnime', JSON.stringify(anime));
          window.location.href = 'anime.html';
        });
        
        favoriteAnimeList.appendChild(animeCard);
      });
    } catch (error) {
      console.error("Error loading favorite anime:", error);
    }
  }

  // Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Firebase Storage
  async function uploadImage(file, path) {
    try {
      const storageRef = ref(storage, path);
      const snapshot = await uploadBytes(storageRef, file);
      const downloadURL = await getDownloadURL(snapshot.ref);
      return downloadURL;
    } catch (error) {
      console.error("Error uploading image:", error);
      throw error;
    }
  }

  // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø³Ù…
  document.getElementById('editName').addEventListener('click', () => {
    const currentName = nameText.textContent;
    
    showModal("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø³Ù…:", currentName, async (newName) => {
      try {
        // ØªØ­Ø¯ÙŠØ« ÙÙŠ Firebase Auth
        await updateProfile(currentUser, {
          displayName: newName
        });
        
        // ØªØ­Ø¯ÙŠØ« ÙÙŠ Firestore
        await updateDoc(doc(db, "users", currentUser.uid), {
          username: newName,
          lastUpdated: serverTimestamp()
        });
        
        nameText.textContent = newName;
        showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­! ğŸŒŸ');
      } catch (error) {
        console.error("Error updating name:", error);
        showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù…: ' + error.message, 'error');
      }
    });
  });

  // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø¨Ø°Ø©
  document.getElementById('editAbout').addEventListener('click', () => {
    const currentAbout = about.textContent;

    showModal("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø¨Ø°Ø©:", currentAbout, async (newAbout) => {
      try {
        await updateDoc(doc(db, "users", currentUser.uid), {
          about: newAbout,
          lastUpdated: serverTimestamp()
        });
        
        about.textContent = newAbout;
        showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨Ø°Ø© Ø¨Ù†Ø¬Ø§Ø­! âœ¨');
      } catch (error) {
        console.error("Error updating about:", error);
        showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨Ø°Ø©: ' + error.message, 'error');
      }
    });
  });

  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯ Ù„Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±
  function handleImageUpload(file, maxMb, path, successMessage) {
    if (!file) return;
      
    if (file.size > maxMb * 1024 * 1024) {
      showNotification(`Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† ${maxMb}MB`, 'error');
      return;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
    if (!file.type.startsWith('image/')) {
      showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ÙÙ‚Ø·', 'error');
      return;
    }
    
    showNotification('Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...', 'info');
    
    uploadImage(file, path)
      .then(async (downloadURL) => {
        // ØªØ­Ø¯ÙŠØ« ÙÙŠ Firestore
        const field = path.includes('profile') ? 'profileImage' : 'coverImage';
        await updateDoc(doc(db, "users", currentUser.uid), {
          [field]: downloadURL,
          lastUpdated: serverTimestamp()
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        if (field === 'profileImage') {
          profileImg.src = downloadURL;
        } else {
          coverImg.style.backgroundImage = `url(${downloadURL})`;
        }
        
        showNotification(successMessage, 'success');
      })
      .catch(error => {
        console.error("Error uploading image:", error);
        showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©: ' + error.message, 'error');
      });
  }

  // ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
  document.getElementById('changeImg').addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    
    input.onchange = e => {
      const file = e.target.files[0];
      if (file) {
        handleImageUpload(
          file, 
          5, 
          `profile-images/${currentUser.uid}/${Date.now()}_${file.name}`,
          'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ğŸ“¸'
        );
      }
    };
    
    input.click();
  });

  // ØªØºÙŠÙŠØ± ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
  document.getElementById('changeCover').addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    
    input.onchange = e => {
      const file = e.target.files[0];
      if (file) {
        handleImageUpload(
          file, 
          8, 
          `cover-images/${currentUser.uid}/${Date.now()}_${file.name}`,
          'ØªÙ… ØªØ­Ø¯ÙŠØ« ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù Ø¨Ù†Ø¬Ø§Ø­! ğŸ–¼ï¸'
        );
      }
    };
    
    input.click();
  });

  // Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ù…ÙŠØ²
  document.getElementById('verifyBtn').addEventListener('click', () => {
    showModal("Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ù…ÙŠØ²:", "", async (code) => {
      if (code === "ORAA2025") {
        try {
          await updateDoc(doc(db, "users", currentUser.uid), {
            verified: true,
            lastUpdated: serverTimestamp()
          });
          
          verifyIcon.style.display = "inline";
          showNotification('ğŸ‰ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù…ÙŠØ² Ø¨Ù†Ø¬Ø§Ø­! Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù…Ø²Ø§ÙŠØ§ Ø§Ù„Ø­ØµØ±ÙŠØ©', 'success');
        } catch (error) {
          console.error("Error verifying account:", error);
          showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙØ¹ÙŠÙ„: ' + error.message, 'error');
        }
      } else if (code) {
        showNotification('âŒ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
      }
    }, 'password');
  });

  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
  logoutBtn.addEventListener('click', async () => {
    try {
      await signOut(auth);
      showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
      setTimeout(() => {
        window.location.href = 'login.html';
      }, 1500);
    } catch (error) {
      console.error("Error signing out:", error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬: ' + error.message, 'error');
    }
  });

  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØµÙˆØ±
  document.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG') {
      const img = e.target;
      const backup = img.getAttribute('data-backup');
      if (backup && img.src !== backup) {
        img.src = backup;
      }
    }
  }, true);

  // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
  onAuthStateChanged(auth, async (user) => {
    console.log('Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:', user ? 'Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„' : 'ØºÙŠØ± Ù…Ø³Ø¬Ù„');
    
    if (user) {
      // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
      currentUser = user;
      console.log('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', user.email);
      
      try {
        await loadUserData(user);
        
        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        setTimeout(() => {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
            mainContent.style.display = 'block';
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø¸Ù‡ÙˆØ± Ù„Ù„Ø¹Ù†Ø§ØµØ±
            setTimeout(() => {
              const elements = document.querySelectorAll('.stat, .badge, .anime-card');
              elements.forEach((el, index) => {
                setTimeout(() => {
                  el.style.opacity = '1';
                  el.style.transform = 'translateY(0)';
                }, index * 100);
              });
            }, 100);
            
          }, 500);
        }, 1000);
        
      } catch (error) {
        console.error("Error in auth state change:", error);
        loadingScreen.style.display = 'none';
        showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
      }
      
    } else {
      // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
      console.log('Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
      setTimeout(() => {
        loadingScreen.style.display = 'none';
        loginRequired.classList.add('show');
      }, 1000);
    }
  });

  // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª CSS Ù„Ù„Ø¸Ù‡ÙˆØ±
  const style = document.createElement('style');
  style.textContent = `
    .stat, .badge, .anime-card {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease-out;
    }
    
    /* Ù…Ù†Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ */
    * {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ÙÙŠ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    input, textarea {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
  `;
  document.head.appendChild(style);

  // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
  document.addEventListener('DOMContentLoaded', function() {
    console.log('Ø§Ù„ØµÙØ­Ø© Ù…Ø­Ù…Ù„Ø©ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...');
    
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù„Ù…Ø³ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ¯Ø¹Ù… hover
    if ('ontouchstart' in window) {
      document.querySelectorAll('.btn, .stat, .badge, .anime-card').forEach(el => {
        el.addEventListener('touchstart', function() {
          this.style.transform = 'scale(0.95)';
        });
        
        el.addEventListener('touchend', function() {
          this.style.transform = '';
        });
      });
    }
  });
</script>
</body>
</html>